{"ast":null,"code":"var _jsxFileName = \"/home/levi/Development/code/phase-5/book-club/client/src/components/Books.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport axios from './axiosConfig';\nimport BookCard from './BookCard';\nimport NavBar from './NavBar';\nimport { BooksContext } from './context/BooksContext';\nimport { GenresContext } from './context/GenresContext';\nimport './css/Books.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Books = () => {\n  _s();\n  const {\n    books,\n    setSelectedGenres\n  } = useContext(BooksContext);\n  const {\n    genres\n  } = useContext(GenresContext);\n  const [authors, setAuthors] = useState([]);\n  const [filteredBooks, setFilteredBooks] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedGenre, setSelectedGenre] = useState(null);\n  const [selectedAuthor, setSelectedAuthor] = useState(null);\n  useEffect(() => {\n    setFilteredBooks(books);\n  }, [books]);\n  useEffect(() => {\n    const fetchAuthors = async () => {\n      try {\n        const response = await axios.get('/authors');\n        setAuthors(response.data);\n      } catch (error) {\n        console.error('Error fetching authors:', error);\n      }\n    };\n    fetchAuthors();\n  }, []);\n  const filterBooks = (query, genre, author) => {\n    let filtered = books;\n    if (genre) {\n      filtered = filtered.filter(book => book.genre && book.genre.id === genre);\n    }\n    if (author) {\n      filtered = filtered.filter(book => book.author === author);\n    }\n    if (query) {\n      filtered = filtered.filter(book => book.title.toLowerCase().includes(query.toLowerCase()));\n    }\n    setFilteredBooks(filtered);\n  };\n  const handleSearch = event => {\n    const query = event.target.value;\n    setSearchQuery(query);\n    filterBooks(query, selectedGenre, selectedAuthor);\n  };\n  const handleGenreClick = genreId => {\n    setSelectedGenre(genreId);\n    setSelectedGenres([genreId]); // Update selected genres in BooksContext\n    filterBooks(searchQuery, genreId, selectedAuthor);\n  };\n  const handleAuthorClick = author => {\n    setSelectedAuthor(author);\n    filterBooks(searchQuery, selectedGenre, author);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"books-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Genres\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: genres.map(genre => /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => handleGenreClick(genre.id),\n            children: genre.name\n          }, genre.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Authors\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: authors.map(author => /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => handleAuthorClick(author),\n            children: author\n          }, author, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-bar\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search by title\",\n            value: searchQuery,\n            onChange: handleSearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"books-container\",\n          children: filteredBooks.map(book => /*#__PURE__*/_jsxDEV(BookCard, {\n            book: book\n          }, book.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(Books, \"Il0xYbCnmefT1GMnjOEVmV+Mv4I=\");\n_c = Books;\nexport default Books;\nvar _c;\n$RefreshReg$(_c, \"Books\");","map":{"version":3,"names":["React","useContext","useEffect","useState","axios","BookCard","NavBar","BooksContext","GenresContext","jsxDEV","_jsxDEV","Books","_s","books","setSelectedGenres","genres","authors","setAuthors","filteredBooks","setFilteredBooks","searchQuery","setSearchQuery","selectedGenre","setSelectedGenre","selectedAuthor","setSelectedAuthor","fetchAuthors","response","get","data","error","console","filterBooks","query","genre","author","filtered","filter","book","id","title","toLowerCase","includes","handleSearch","event","target","value","handleGenreClick","genreId","handleAuthorClick","children","fileName","_jsxFileName","lineNumber","columnNumber","className","map","onClick","name","type","placeholder","onChange","_c","$RefreshReg$"],"sources":["/home/levi/Development/code/phase-5/book-club/client/src/components/Books.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport axios from './axiosConfig';\nimport BookCard from './BookCard';\nimport NavBar from './NavBar';\nimport { BooksContext } from './context/BooksContext';\nimport { GenresContext } from './context/GenresContext';\nimport './css/Books.css';\n\nconst Books = () => {\n  const { books, setSelectedGenres } = useContext(BooksContext);\n  const { genres } = useContext(GenresContext);\n  const [authors, setAuthors] = useState([]);\n  const [filteredBooks, setFilteredBooks] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedGenre, setSelectedGenre] = useState(null);\n  const [selectedAuthor, setSelectedAuthor] = useState(null);\n\n  useEffect(() => {\n    setFilteredBooks(books);\n  }, [books]);\n\n  useEffect(() => {\n    const fetchAuthors = async () => {\n      try {\n        const response = await axios.get('/authors');\n        setAuthors(response.data);\n      } catch (error) {\n        console.error('Error fetching authors:', error);\n      }\n    };\n\n    fetchAuthors();\n  }, []);\n\n  const filterBooks = (query, genre, author) => {\n    let filtered = books;\n\n    if (genre) {\n      filtered = filtered.filter(book => book.genre && book.genre.id === genre);\n    }\n\n    if (author) {\n      filtered = filtered.filter(book => book.author === author);\n    }\n\n    if (query) {\n      filtered = filtered.filter(book => book.title.toLowerCase().includes(query.toLowerCase()));\n    }\n\n    setFilteredBooks(filtered);\n  };\n\n  const handleSearch = (event) => {\n    const query = event.target.value;\n    setSearchQuery(query);\n    filterBooks(query, selectedGenre, selectedAuthor);\n  };\n\n  const handleGenreClick = (genreId) => {\n    setSelectedGenre(genreId);\n    setSelectedGenres([genreId]); // Update selected genres in BooksContext\n    filterBooks(searchQuery, genreId, selectedAuthor);\n  };\n\n  const handleAuthorClick = (author) => {\n    setSelectedAuthor(author);\n    filterBooks(searchQuery, selectedGenre, author);\n  };\n\n  return (\n    <div>\n      <NavBar />\n      <div className=\"books-page\">\n        <div className=\"sidebar\">\n          <h2>Genres</h2>\n          <ul>\n            {genres.map((genre) => (\n              <li key={genre.id} onClick={() => handleGenreClick(genre.id)}>\n                {genre.name}\n              </li>\n            ))}\n          </ul>\n          <h2>Authors</h2>\n          <ul>\n            {authors.map((author) => (\n              <li key={author} onClick={() => handleAuthorClick(author)}>\n                {author}\n              </li>\n            ))}\n          </ul>\n        </div>\n        <div className=\"main-content\">\n          <div className=\"search-bar\">\n            <input\n              type=\"text\"\n              placeholder=\"Search by title\"\n              value={searchQuery}\n              onChange={handleSearch}\n            />\n          </div>\n          <div className=\"books-container\">\n            {filteredBooks.map((book) => (\n              <BookCard key={book.id} book={book} />\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Books;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}