{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import NavBar from'./NavBar';import{AuthContext}from'./context/AuthContext';import{ThemeContext}from'./context/ThemeContext';import{Card,Spin,List,Rate,Button}from'antd';import{Link}from'react-router-dom';import{UserDeleteOutlined,EyeOutlined}from'@ant-design/icons';import'./css/UserProfile.css';import defaultAvatar from'./css/avatar-15.png';import UserUpdate from'./UserUpdate';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserProfile=()=>{const{user,fetchUserDetailsById,removeFriend}=useContext(AuthContext);const{theme}=useContext(ThemeContext);const[userDetails,setUserDetails]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[showUpdateForm,setShowUpdateForm]=useState(false);// State to control visibility of UserUpdate component\nuseEffect(()=>{const fetchUserDetails=async()=>{if(user&&user.id){try{const data=await fetchUserDetailsById(user.id);setUserDetails(data);setLoading(false);}catch(error){setError('Error fetching user details.');setLoading(false);}}else{setError('User not found.');setLoading(false);}};fetchUserDetails();},[user,fetchUserDetailsById]);const handleRemoveFriend=async friendId=>{try{await removeFriend(friendId);setUserDetails(prevDetails=>({...prevDetails,friends:prevDetails.friends.filter(friend=>friend.id!==friendId)}));}catch(error){setError('Error removing friend.');}};const toggleUpdateForm=()=>{setShowUpdateForm(!showUpdateForm);// Toggle visibility of UserUpdate component\n};return/*#__PURE__*/_jsxs(\"div\",{className:`user-profile-page ${theme}`,children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:loading?/*#__PURE__*/_jsx(Spin,{size:\"large\"}):error?/*#__PURE__*/_jsx(\"p\",{children:error}):userDetails?/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-column\",children:[/*#__PURE__*/_jsxs(Card,{className:`profile-card ${theme}`,children:[/*#__PURE__*/_jsx(\"img\",{src:defaultAvatar,alt:\"User Avatar\",className:\"profile-image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-info\",children:/*#__PURE__*/_jsx(\"h2\",{children:userDetails.username})})]}),/*#__PURE__*/_jsx(Button,{onClick:toggleUpdateForm,className:\"update-info-button\",children:\"Update Info\"}),showUpdateForm&&/*#__PURE__*/_jsx(UserUpdate,{user:userDetails}),\" \",userDetails.created_clubs.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"created-clubs\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Created Club\"}),/*#__PURE__*/_jsx(List,{itemLayout:\"horizontal\",dataSource:userDetails.created_clubs,renderItem:club=>/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(List.Item.Meta,{title:club.name})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"clubs-list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Joined Clubs\"}),userDetails.joined_clubs.length>0?/*#__PURE__*/_jsx(List,{itemLayout:\"horizontal\",dataSource:userDetails.joined_clubs,renderItem:club=>/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(List.Item.Meta,{title:club.name})})}):/*#__PURE__*/_jsx(\"p\",{children:\"No clubs joined yet.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"center-column\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Books\"}),userDetails.books.length>0?/*#__PURE__*/_jsx(List,{grid:{gutter:16,column:4},dataSource:userDetails.books,renderItem:book=>/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsxs(Card,{hoverable:true,className:`book-card ${theme}`,cover:/*#__PURE__*/_jsx(\"img\",{alt:book.title,src:book.image_url}),children:[/*#__PURE__*/_jsx(Card.Meta,{title:book.title,description:`Author: ${book.author}`}),/*#__PURE__*/_jsx(Rate,{value:book.rating||0})]})})}):/*#__PURE__*/_jsx(\"p\",{children:\"No books added yet.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-column\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Friends\"}),userDetails.friends.length>0?/*#__PURE__*/_jsx(List,{itemLayout:\"horizontal\",dataSource:userDetails.friends,renderItem:friend=>/*#__PURE__*/_jsx(List.Item,{actions:[/*#__PURE__*/_jsx(UserDeleteOutlined,{onClick:()=>handleRemoveFriend(friend.id),style:{fontSize:'20px',cursor:'pointer',color:'#007bff'}}),/*#__PURE__*/_jsx(Link,{to:`/users/${friend.id}`,children:/*#__PURE__*/_jsx(EyeOutlined,{style:{fontSize:'20px',cursor:'pointer',color:'#007bff'}})})],children:/*#__PURE__*/_jsx(List.Item.Meta,{title:friend.username})})}):/*#__PURE__*/_jsx(\"p\",{children:\"No friends added yet.\"})]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"User not found\"})})]});};export default UserProfile;","map":{"version":3,"names":["React","useEffect","useState","useContext","NavBar","AuthContext","ThemeContext","Card","Spin","List","Rate","Button","Link","UserDeleteOutlined","EyeOutlined","defaultAvatar","UserUpdate","jsx","_jsx","jsxs","_jsxs","UserProfile","user","fetchUserDetailsById","removeFriend","theme","userDetails","setUserDetails","loading","setLoading","error","setError","showUpdateForm","setShowUpdateForm","fetchUserDetails","id","data","handleRemoveFriend","friendId","prevDetails","friends","filter","friend","toggleUpdateForm","className","children","size","src","alt","username","onClick","created_clubs","length","itemLayout","dataSource","renderItem","club","Item","Meta","title","name","joined_clubs","books","grid","gutter","column","book","hoverable","cover","image_url","description","author","value","rating","actions","style","fontSize","cursor","color","to"],"sources":["/home/levi/Development/book-club/client/src/components/UserProfile.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport NavBar from './NavBar';\nimport { AuthContext } from './context/AuthContext';\nimport { ThemeContext } from './context/ThemeContext';\nimport { Card, Spin, List, Rate, Button } from 'antd';\nimport { Link } from 'react-router-dom';\nimport { UserDeleteOutlined, EyeOutlined } from '@ant-design/icons';\nimport './css/UserProfile.css';\nimport defaultAvatar from './css/avatar-15.png'; \nimport UserUpdate from './UserUpdate'; \n\nconst UserProfile = () => {\n  const { user, fetchUserDetailsById, removeFriend } = useContext(AuthContext); \n  const { theme } = useContext(ThemeContext);\n  const [userDetails, setUserDetails] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showUpdateForm, setShowUpdateForm] = useState(false); // State to control visibility of UserUpdate component\n\n  useEffect(() => {\n    const fetchUserDetails = async () => {\n      if (user && user.id) {\n        try {\n          const data = await fetchUserDetailsById(user.id);\n          setUserDetails(data);\n          setLoading(false);\n        } catch (error) {\n          setError('Error fetching user details.');\n          setLoading(false);\n        }\n      } else {\n        setError('User not found.');\n        setLoading(false);\n      }\n    };\n\n    fetchUserDetails();\n  }, [user, fetchUserDetailsById]);\n\n  const handleRemoveFriend = async (friendId) => {\n    try {\n      await removeFriend(friendId);\n      setUserDetails((prevDetails) => ({\n        ...prevDetails,\n        friends: prevDetails.friends.filter((friend) => friend.id !== friendId),\n      }));\n    } catch (error) {\n      setError('Error removing friend.');\n    }\n  };\n\n  const toggleUpdateForm = () => {\n    setShowUpdateForm(!showUpdateForm); // Toggle visibility of UserUpdate component\n  };\n\n  return (\n    <div className={`user-profile-page ${theme}`}>\n      <NavBar />\n      <div className=\"content\">\n        {loading ? (\n          <Spin size=\"large\" />\n        ) : error ? (\n          <p>{error}</p>\n        ) : userDetails ? (\n          <div className=\"profile-container\">\n            <div className=\"left-column\">\n              <Card className={`profile-card ${theme}`}>\n                <img src={defaultAvatar} alt=\"User Avatar\" className=\"profile-image\" />\n                <div className=\"profile-info\">\n                  <h2>{userDetails.username}</h2>\n                </div>\n              </Card>\n              <Button onClick={toggleUpdateForm} className=\"update-info-button\">Update Info</Button>\n              {showUpdateForm && <UserUpdate user={userDetails} />} {/* Conditionally render UserUpdate component */}\n              {userDetails.created_clubs.length > 0 && (\n                <div className=\"created-clubs\">\n                  <h3>Created Club</h3>\n                  <List\n                    itemLayout=\"horizontal\"\n                    dataSource={userDetails.created_clubs}\n                    renderItem={(club) => (\n                      <List.Item>\n                        <List.Item.Meta title={club.name} />\n                      </List.Item>\n                    )}\n                  />\n                </div>\n              )}\n              <div className=\"clubs-list\">\n                <h3>Joined Clubs</h3>\n                {userDetails.joined_clubs.length > 0 ? (\n                  <List\n                    itemLayout=\"horizontal\"\n                    dataSource={userDetails.joined_clubs}\n                    renderItem={(club) => (\n                      <List.Item>\n                        <List.Item.Meta title={club.name} /> \n                      </List.Item>\n                    )}\n                  />\n                ) : (\n                  <p>No clubs joined yet.</p>\n                )}\n              </div>\n            </div>\n            <div className=\"center-column\">\n              <h3>Books</h3>\n              {userDetails.books.length > 0 ? (\n                <List\n                  grid={{ gutter: 16, column: 4 }}\n                  dataSource={userDetails.books}\n                  renderItem={(book) => (\n                    <List.Item>\n                      <Card\n                        hoverable\n                        className={`book-card ${theme}`} \n                        cover={<img alt={book.title} src={book.image_url} />}\n                      >\n                        <Card.Meta title={book.title} description={`Author: ${book.author}`} />\n                        <Rate value={book.rating || 0} />\n                      </Card>\n                    </List.Item>\n                  )}\n                />\n              ) : (\n                <p>No books added yet.</p>\n              )}\n            </div>\n            <div className=\"right-column\">\n              <h3>Friends</h3>\n              {userDetails.friends.length > 0 ? (\n                <List\n                  itemLayout=\"horizontal\"\n                  dataSource={userDetails.friends}\n                  renderItem={(friend) => (\n                    <List.Item\n                      actions={[\n                        <UserDeleteOutlined onClick={() => handleRemoveFriend(friend.id)} style={{ fontSize: '20px', cursor: 'pointer', color: '#007bff' }} />,\n                        <Link to={`/users/${friend.id}`}><EyeOutlined style={{ fontSize: '20px', cursor: 'pointer', color: '#007bff' }} /></Link>\n                      ]}\n                    >\n                      <List.Item.Meta\n                        title={friend.username}\n                      />\n                    </List.Item>\n                  )}\n                />\n              ) : (\n                <p>No friends added yet.</p>\n              )}\n            </div>\n          </div>\n        ) : (\n          <p>User not found</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default UserProfile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}