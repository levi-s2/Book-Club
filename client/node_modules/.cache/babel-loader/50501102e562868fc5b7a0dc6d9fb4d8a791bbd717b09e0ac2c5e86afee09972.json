{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{useParams,Link}from'react-router-dom';import{AuthContext}from'./context/AuthContext';import{BookClubsContext}from'./context/BookClubsContext';import NavBar from'./NavBar';import{Card,Button}from'antd';import{UserOutlined}from'@ant-design/icons';import{ThemeContext}from'./context/ThemeContext';import'./css/BookClubDetails.css';import Posts from'./Posts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookClubDetails=()=>{const{id}=useParams();const{user}=useContext(AuthContext);const{theme}=useContext(ThemeContext);const{fetchClubDetails,joinClub,leaveClub}=useContext(BookClubsContext);const[clubDetails,setClubDetails]=useState(null);const[posts,setPosts]=useState([]);useEffect(()=>{const getClubDetails=async()=>{const details=await fetchClubDetails(id);if(details){setClubDetails(details);setPosts(details.posts||[]);}};getClubDetails();},[id,fetchClubDetails]);const handleJoinClub=async()=>{const updatedDetails=await joinClub(id);if(updatedDetails){setClubDetails(updatedDetails);}};const handleLeaveClub=async()=>{const updatedDetails=await leaveClub(id);if(updatedDetails){setClubDetails(updatedDetails);}};if(!clubDetails){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}const isCreator=user&&clubDetails.creator&&user.id===clubDetails.creator.id;const isMember=user&&clubDetails.members.some(member=>member.id===user.id);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:`book-club-details ${theme}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"club-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:clubDetails.name}),/*#__PURE__*/_jsx(\"p\",{children:clubDetails.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"club-genres\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Genres\"}),clubDetails.genres&&clubDetails.genres.length>0?/*#__PURE__*/_jsx(\"ul\",{children:clubDetails.genres.map(genre=>/*#__PURE__*/_jsx(\"li\",{children:genre.name},genre.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No genres selected.\"})]}),!isMember&&!isCreator?/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleJoinClub,className:\"join-club-button\",children:\"Join Club\"}):!isCreator&&/*#__PURE__*/_jsx(Button,{type:\"danger\",onClick:handleLeaveClub,className:\"leave-club-button\",children:\"Leave Club\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"club-current-reading\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Current Reading\"}),clubDetails.current_book?/*#__PURE__*/_jsx(Card,{hoverable:true,cover:/*#__PURE__*/_jsx(\"img\",{alt:clubDetails.current_book.title,src:clubDetails.current_book.image_url}),children:/*#__PURE__*/_jsx(Card.Meta,{title:clubDetails.current_book.title,description:`Started at: ${new Date(clubDetails.current_book.started_at).toLocaleDateString()}`})}):/*#__PURE__*/_jsx(\"p\",{children:\"No current book.\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"center-column\",children:isMember||isCreator?/*#__PURE__*/_jsx(Posts,{clubId:id,posts:posts,setPosts:setPosts}):/*#__PURE__*/_jsx(\"p\",{children:\"You must be a member to view and post comments.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"club-creator\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Creator\"}),clubDetails.creator?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:`/users/${clubDetails.creator.id}`,className:\"profile-link\",children:clubDetails.creator.username})}):/*#__PURE__*/_jsx(\"p\",{children:\"Unknown creator\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"club-members\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Members\"}),clubDetails.members&&clubDetails.members.length>0?/*#__PURE__*/_jsx(\"ul\",{children:clubDetails.members.map(member=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(UserOutlined,{}),/*#__PURE__*/_jsx(Link,{to:`/users/${member.id}`,className:\"profile-link\",children:member.username})]},member.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No members yet.\"})]})]})]})]});};export default BookClubDetails;","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","Link","AuthContext","BookClubsContext","NavBar","Card","Button","UserOutlined","ThemeContext","Posts","jsx","_jsx","jsxs","_jsxs","BookClubDetails","id","user","theme","fetchClubDetails","joinClub","leaveClub","clubDetails","setClubDetails","posts","setPosts","getClubDetails","details","handleJoinClub","updatedDetails","handleLeaveClub","children","isCreator","creator","isMember","members","some","member","className","name","description","genres","length","map","genre","type","onClick","current_book","hoverable","cover","alt","title","src","image_url","Meta","Date","started_at","toLocaleDateString","clubId","to","username"],"sources":["/home/levi/Development/book-club/client/src/components/BookClubDetails.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { AuthContext } from './context/AuthContext';\nimport { BookClubsContext } from './context/BookClubsContext';\nimport NavBar from './NavBar';\nimport { Card, Button } from 'antd';\nimport { UserOutlined } from '@ant-design/icons';\nimport { ThemeContext } from './context/ThemeContext';\nimport './css/BookClubDetails.css';\nimport Posts from './Posts';\n\nconst BookClubDetails = () => {\n  const { id } = useParams();\n  const { user } = useContext(AuthContext);\n  const { theme } = useContext(ThemeContext);\n  const { fetchClubDetails, joinClub, leaveClub } = useContext(BookClubsContext);\n  const [clubDetails, setClubDetails] = useState(null);\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    const getClubDetails = async () => {\n      const details = await fetchClubDetails(id);\n      if (details) {\n        setClubDetails(details);\n        setPosts(details.posts || []);\n      }\n    };\n\n    getClubDetails();\n  }, [id, fetchClubDetails]);\n\n  const handleJoinClub = async () => {\n    const updatedDetails = await joinClub(id);\n    if (updatedDetails) {\n      setClubDetails(updatedDetails);\n    }\n  };\n\n  const handleLeaveClub = async () => {\n    const updatedDetails = await leaveClub(id);\n    if (updatedDetails) {\n      setClubDetails(updatedDetails);\n    }\n  };\n\n  if (!clubDetails) {\n    return <div>Loading...</div>;\n  }\n\n  const isCreator = user && clubDetails.creator && user.id === clubDetails.creator.id;\n  const isMember = user && clubDetails.members.some(member => member.id === user.id);\n\n  return (\n    <div>\n      <NavBar />\n      <div className={`book-club-details ${theme}`}>\n        <div className=\"left-column\">\n          <div className=\"club-header\">\n            <h2>{clubDetails.name}</h2>\n            <p>{clubDetails.description}</p>\n          </div>\n          <div className=\"club-genres\">\n            <h3>Genres</h3>\n            {clubDetails.genres && clubDetails.genres.length > 0 ? (\n              <ul>\n                {clubDetails.genres.map((genre) => (\n                  <li key={genre.id}>{genre.name}</li>\n                ))}\n              </ul>\n            ) : (\n              <p>No genres selected.</p>\n            )}\n          </div>\n          {!isMember && !isCreator ? (\n            <Button type=\"primary\" onClick={handleJoinClub} className=\"join-club-button\">Join Club</Button>\n          ) : (\n            !isCreator && <Button type=\"danger\" onClick={handleLeaveClub} className=\"leave-club-button\">Leave Club</Button>\n          )}\n          <div className=\"club-current-reading\">\n            <h3>Current Reading</h3>\n            {clubDetails.current_book ? (\n              <Card\n                hoverable\n                cover={<img alt={clubDetails.current_book.title} src={clubDetails.current_book.image_url} />}\n              >\n                <Card.Meta title={clubDetails.current_book.title} description={`Started at: ${new Date(clubDetails.current_book.started_at).toLocaleDateString()}`} />\n              </Card>\n            ) : (\n              <p>No current book.</p>\n            )}\n          </div>\n        </div>\n        <div className=\"center-column\">\n          {isMember || isCreator ? (\n            <Posts clubId={id} posts={posts} setPosts={setPosts} />\n          ) : (\n            <p>You must be a member to view and post comments.</p>\n          )}\n        </div>\n        <div className=\"right-column\">\n          <div className=\"club-creator\">\n            <h3>Creator</h3>\n            {clubDetails.creator ? (\n              <div>\n                <Link to={`/users/${clubDetails.creator.id}`} className=\"profile-link\">\n                  {clubDetails.creator.username}\n                </Link>\n              </div>\n            ) : (\n              <p>Unknown creator</p>\n            )}\n          </div>\n          <div className=\"club-members\">\n            <h3>Members</h3>\n            {clubDetails.members && clubDetails.members.length > 0 ? (\n              <ul>\n                {clubDetails.members.map((member) => (\n                  <li key={member.id}>\n                    <UserOutlined />\n                    <Link to={`/users/${member.id}`} className=\"profile-link\">\n                      {member.username}\n                    </Link>\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <p>No members yet.</p>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BookClubDetails;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}