{"ast":null,"code":"import React,{useContext}from'react';import{useHistory}from'react-router-dom';import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import{AuthContext}from'./context/AuthContext';import{Form as AntForm,Input,Button,message}from'antd';import'./css/login.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{theme}=_ref;const history=useHistory();const{login}=useContext(AuthContext);const initialValues={email:'',password:''};const validationSchema=Yup.object({email:Yup.string().email('Invalid email address').required('Email is required'),password:Yup.string().min(6,'Password must be at least 6 characters long').required('Password is required')});const handleSubmit=async(values,_ref2)=>{let{setSubmitting,setErrors}=_ref2;try{await login(values.email,values.password);message.success('Login successful!');history.push('/book-clubs');}catch(error){setErrors('Email or Password don´t match');message.error('Login failed. Please try again.');}finally{setSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:`login-container ${theme}`,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(Formik,{initialValues:initialValues,validationSchema:validationSchema,onSubmit:handleSubmit,children:_ref3=>{let{isSubmitting,errors}=_ref3;return/*#__PURE__*/_jsxs(Form,{className:\"login-form\",children:[/*#__PURE__*/_jsxs(AntForm.Item,{label:\"Email\",name:\"email\",children:[/*#__PURE__*/_jsx(Field,{as:Input,name:\"email\",type:\"email\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"email\",component:\"div\",className:\"error-message\"})]}),/*#__PURE__*/_jsxs(AntForm.Item,{label:\"Password\",name:\"password\",children:[/*#__PURE__*/_jsx(Field,{as:Input.Password,name:\"password\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"password\",component:\"div\",className:\"error-message\"})]}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",disabled:isSubmitting,children:\"Login\"}),errors.general&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.general})]});}})]});};export default Login;","map":{"version":3,"names":["React","useContext","useHistory","Formik","Form","Field","ErrorMessage","Yup","AuthContext","AntForm","Input","Button","message","jsx","_jsx","jsxs","_jsxs","Login","_ref","theme","history","login","initialValues","email","password","validationSchema","object","string","required","min","handleSubmit","values","_ref2","setSubmitting","setErrors","success","push","error","className","children","onSubmit","_ref3","isSubmitting","errors","Item","label","name","as","type","component","Password","htmlType","disabled","general"],"sources":["/home/levi/Development/book-club/client/src/components/Login.js"],"sourcesContent":["import React, { useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\nimport { AuthContext } from './context/AuthContext';\nimport { Form as AntForm, Input, Button, message } from 'antd';\nimport './css/login.css';\n\nconst Login = ({ theme }) => {\n  const history = useHistory();\n  const { login } = useContext(AuthContext);\n\n  const initialValues = {\n    email: '',\n    password: '',\n  };\n\n  const validationSchema = Yup.object({\n    email: Yup.string()\n      .email('Invalid email address')\n      .required('Email is required'),\n    password: Yup.string()\n      .min(6, 'Password must be at least 6 characters long')\n      .required('Password is required'),\n  });\n\n  const handleSubmit = async (values, { setSubmitting, setErrors }) => {\n    try {\n      await login(values.email, values.password);\n      message.success('Login successful!');\n      history.push('/book-clubs');\n    } catch (error) {\n      setErrors('Email or Password don´t match');\n      message.error('Login failed. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div className={`login-container ${theme}`}>\n      <h2>Login</h2>\n      <Formik\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        onSubmit={handleSubmit}\n      >\n        {({ isSubmitting, errors }) => (\n          <Form className=\"login-form\">\n            <AntForm.Item label=\"Email\" name=\"email\">\n              <Field as={Input} name=\"email\" type=\"email\" />\n              <ErrorMessage name=\"email\" component=\"div\" className=\"error-message\" />\n            </AntForm.Item>\n            <AntForm.Item label=\"Password\" name=\"password\">\n              <Field as={Input.Password} name=\"password\" />\n              <ErrorMessage name=\"password\" component=\"div\" className=\"error-message\" />\n            </AntForm.Item>\n            <Button type=\"primary\" htmlType=\"submit\" disabled={isSubmitting}>\n              Login\n            </Button>\n            {errors.general && <p className=\"error-message\">{errors.general}</p>}\n          </Form>\n        )}\n      </Formik>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}