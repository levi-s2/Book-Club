{"ast":null,"code":"import React,{useContext}from'react';import{useHistory}from'react-router-dom';import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import{AuthContext}from'./context/AuthContext';import{Form as AntForm,Input,Button,message}from'antd';import'./css/Register.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=_ref=>{let{theme}=_ref;const history=useHistory();const{register}=useContext(AuthContext);const initialValues={username:'',email:'',password:''};const validationSchema=Yup.object({username:Yup.string().min(3,'Username must be at least 3 characters long').max(30,'Username cannot be longer than 30 characters').required('Username is required'),email:Yup.string().email('Invalid email address').required('Email is required'),password:Yup.string().min(6,'Password must be at least 6 characters long').required('Password is required')});const handleSubmit=async(values,_ref2)=>{let{setSubmitting,setErrors,resetForm}=_ref2;try{await register(values.username,values.email,values.password);message.success('Registration successful!');resetForm();history.push('/');}catch(error){message.error('Registration failed. Please try again.');}finally{setSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:`register-container ${theme}`,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Register\"}),/*#__PURE__*/_jsx(Formik,{initialValues:initialValues,validationSchema:validationSchema,onSubmit:handleSubmit,children:_ref3=>{let{isSubmitting,errors}=_ref3;return/*#__PURE__*/_jsxs(Form,{className:\"register-form\",children:[/*#__PURE__*/_jsxs(AntForm.Item,{label:\"Username\",name:\"username\",children:[/*#__PURE__*/_jsx(Field,{as:Input,name:\"username\",type:\"text\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"username\",component:\"div\",className:\"error-message\"})]}),/*#__PURE__*/_jsxs(AntForm.Item,{label:\"Email\",name:\"email\",children:[/*#__PURE__*/_jsx(Field,{as:Input,name:\"email\",type:\"email\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"email\",component:\"div\",className:\"error-message\"})]}),/*#__PURE__*/_jsxs(AntForm.Item,{label:\"Password\",name:\"password\",children:[/*#__PURE__*/_jsx(Field,{as:Input.Password,name:\"password\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"password\",component:\"div\",className:\"error-message\"})]}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",disabled:isSubmitting,children:\"Register\"}),errors.general&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.general})]});}})]});};export default Register;","map":{"version":3,"names":["React","useContext","useHistory","Formik","Form","Field","ErrorMessage","Yup","AuthContext","AntForm","Input","Button","message","jsx","_jsx","jsxs","_jsxs","Register","_ref","theme","history","register","initialValues","username","email","password","validationSchema","object","string","min","max","required","handleSubmit","values","_ref2","setSubmitting","setErrors","resetForm","success","push","error","className","children","onSubmit","_ref3","isSubmitting","errors","Item","label","name","as","type","component","Password","htmlType","disabled","general"],"sources":["/home/levi/Development/book-club/client/src/components/Register.js"],"sourcesContent":["import React, { useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\nimport { AuthContext } from './context/AuthContext';\nimport { Form as AntForm, Input, Button, message } from 'antd';\nimport './css/Register.css';\n\nconst Register = ({ theme }) => {\n  const history = useHistory();\n  const { register } = useContext(AuthContext);\n\n  const initialValues = {\n    username: '',\n    email: '',\n    password: '',\n  };\n\n  const validationSchema = Yup.object({\n    username: Yup.string()\n      .min(3, 'Username must be at least 3 characters long')\n      .max(30, 'Username cannot be longer than 30 characters')\n      .required('Username is required'),\n    email: Yup.string()\n      .email('Invalid email address')\n      .required('Email is required'),\n    password: Yup.string()\n      .min(6, 'Password must be at least 6 characters long')\n      .required('Password is required'),\n  });\n\n  const handleSubmit = async (values, { setSubmitting, setErrors, resetForm }) => {\n    try {\n      await register(values.username, values.email, values.password);\n      message.success('Registration successful!');\n      resetForm();\n      history.push('/');\n    } catch (error) {\n      message.error('Registration failed. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div className={`register-container ${theme}`}>\n      <h2>Register</h2>\n      <Formik\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        onSubmit={handleSubmit}\n      >\n        {({ isSubmitting, errors }) => (\n          <Form className=\"register-form\">\n            <AntForm.Item label=\"Username\" name=\"username\">\n              <Field as={Input} name=\"username\" type=\"text\" />\n              <ErrorMessage name=\"username\" component=\"div\" className=\"error-message\" />\n            </AntForm.Item>\n            <AntForm.Item label=\"Email\" name=\"email\">\n              <Field as={Input} name=\"email\" type=\"email\" />\n              <ErrorMessage name=\"email\" component=\"div\" className=\"error-message\" />\n            </AntForm.Item>\n            <AntForm.Item label=\"Password\" name=\"password\">\n              <Field as={Input.Password} name=\"password\" />\n              <ErrorMessage name=\"password\" component=\"div\" className=\"error-message\" />\n            </AntForm.Item>\n            <Button type=\"primary\" htmlType=\"submit\" disabled={isSubmitting}>\n              Register\n            </Button>\n            {errors.general && <p className=\"error-message\">{errors.general}</p>}\n          </Form>\n        )}\n      </Formik>\n    </div>\n  );\n};\n\nexport default Register;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,OAASC,MAAM,CAAEC,IAAI,CAAEC,KAAK,CAAEC,YAAY,KAAQ,QAAQ,CAC1D,MAAO,GAAK,CAAAC,GAAG,KAAM,KAAK,CAC1B,OAASC,WAAW,KAAQ,uBAAuB,CACnD,OAASJ,IAAI,GAAI,CAAAK,OAAO,CAAEC,KAAK,CAAEC,MAAM,CAAEC,OAAO,KAAQ,MAAM,CAC9D,MAAO,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5B,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAAe,IAAd,CAAEC,KAAM,CAAC,CAAAD,IAAA,CACzB,KAAM,CAAAE,OAAO,CAAGlB,UAAU,CAAC,CAAC,CAC5B,KAAM,CAAEmB,QAAS,CAAC,CAAGpB,UAAU,CAACO,WAAW,CAAC,CAE5C,KAAM,CAAAc,aAAa,CAAG,CACpBC,QAAQ,CAAE,EAAE,CACZC,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EACZ,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAGnB,GAAG,CAACoB,MAAM,CAAC,CAClCJ,QAAQ,CAAEhB,GAAG,CAACqB,MAAM,CAAC,CAAC,CACnBC,GAAG,CAAC,CAAC,CAAE,6CAA6C,CAAC,CACrDC,GAAG,CAAC,EAAE,CAAE,8CAA8C,CAAC,CACvDC,QAAQ,CAAC,sBAAsB,CAAC,CACnCP,KAAK,CAAEjB,GAAG,CAACqB,MAAM,CAAC,CAAC,CAChBJ,KAAK,CAAC,uBAAuB,CAAC,CAC9BO,QAAQ,CAAC,mBAAmB,CAAC,CAChCN,QAAQ,CAAElB,GAAG,CAACqB,MAAM,CAAC,CAAC,CACnBC,GAAG,CAAC,CAAC,CAAE,6CAA6C,CAAC,CACrDE,QAAQ,CAAC,sBAAsB,CACpC,CAAC,CAAC,CAEF,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAOC,MAAM,CAAAC,KAAA,GAA8C,IAA5C,CAAEC,aAAa,CAAEC,SAAS,CAAEC,SAAU,CAAC,CAAAH,KAAA,CACzE,GAAI,CACF,KAAM,CAAAb,QAAQ,CAACY,MAAM,CAACV,QAAQ,CAAEU,MAAM,CAACT,KAAK,CAAES,MAAM,CAACR,QAAQ,CAAC,CAC9Db,OAAO,CAAC0B,OAAO,CAAC,0BAA0B,CAAC,CAC3CD,SAAS,CAAC,CAAC,CACXjB,OAAO,CAACmB,IAAI,CAAC,GAAG,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACd5B,OAAO,CAAC4B,KAAK,CAAC,wCAAwC,CAAC,CACzD,CAAC,OAAS,CACRL,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,mBACEnB,KAAA,QAAKyB,SAAS,CAAE,sBAAsBtB,KAAK,EAAG,CAAAuB,QAAA,eAC5C5B,IAAA,OAAA4B,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjB5B,IAAA,CAACX,MAAM,EACLmB,aAAa,CAAEA,aAAc,CAC7BI,gBAAgB,CAAEA,gBAAiB,CACnCiB,QAAQ,CAAEX,YAAa,CAAAU,QAAA,CAEtBE,KAAA,MAAC,CAAEC,YAAY,CAAEC,MAAO,CAAC,CAAAF,KAAA,oBACxB5B,KAAA,CAACZ,IAAI,EAACqC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC7B1B,KAAA,CAACP,OAAO,CAACsC,IAAI,EAACC,KAAK,CAAC,UAAU,CAACC,IAAI,CAAC,UAAU,CAAAP,QAAA,eAC5C5B,IAAA,CAACT,KAAK,EAAC6C,EAAE,CAAExC,KAAM,CAACuC,IAAI,CAAC,UAAU,CAACE,IAAI,CAAC,MAAM,CAAE,CAAC,cAChDrC,IAAA,CAACR,YAAY,EAAC2C,IAAI,CAAC,UAAU,CAACG,SAAS,CAAC,KAAK,CAACX,SAAS,CAAC,eAAe,CAAE,CAAC,EAC9D,CAAC,cACfzB,KAAA,CAACP,OAAO,CAACsC,IAAI,EAACC,KAAK,CAAC,OAAO,CAACC,IAAI,CAAC,OAAO,CAAAP,QAAA,eACtC5B,IAAA,CAACT,KAAK,EAAC6C,EAAE,CAAExC,KAAM,CAACuC,IAAI,CAAC,OAAO,CAACE,IAAI,CAAC,OAAO,CAAE,CAAC,cAC9CrC,IAAA,CAACR,YAAY,EAAC2C,IAAI,CAAC,OAAO,CAACG,SAAS,CAAC,KAAK,CAACX,SAAS,CAAC,eAAe,CAAE,CAAC,EAC3D,CAAC,cACfzB,KAAA,CAACP,OAAO,CAACsC,IAAI,EAACC,KAAK,CAAC,UAAU,CAACC,IAAI,CAAC,UAAU,CAAAP,QAAA,eAC5C5B,IAAA,CAACT,KAAK,EAAC6C,EAAE,CAAExC,KAAK,CAAC2C,QAAS,CAACJ,IAAI,CAAC,UAAU,CAAE,CAAC,cAC7CnC,IAAA,CAACR,YAAY,EAAC2C,IAAI,CAAC,UAAU,CAACG,SAAS,CAAC,KAAK,CAACX,SAAS,CAAC,eAAe,CAAE,CAAC,EAC9D,CAAC,cACf3B,IAAA,CAACH,MAAM,EAACwC,IAAI,CAAC,SAAS,CAACG,QAAQ,CAAC,QAAQ,CAACC,QAAQ,CAAEV,YAAa,CAAAH,QAAA,CAAC,UAEjE,CAAQ,CAAC,CACRI,MAAM,CAACU,OAAO,eAAI1C,IAAA,MAAG2B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEI,MAAM,CAACU,OAAO,CAAI,CAAC,EAChE,CAAC,EACR,CACK,CAAC,EACN,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}